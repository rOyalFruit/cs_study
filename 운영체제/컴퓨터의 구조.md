## 컴퓨터의 4가지 핵심 부품

컴퓨터는 다양한 형태(스마트폰, 노트북, 서버 등)로 존재하지만, 모든 컴퓨터는 공통적으로 다음 네 가지 핵심 부품으로 구성된다.

![](https://velog.velcdn.com/images/ekdeon/post/a7e4941e-0fdd-4707-8633-577922c45af2/image.png)

 ### CPU (중앙처리장치)
- 컴퓨터의 두뇌 역할을 하며, 메모리에 저장된 명령어를 읽고, 해석하고, 실행
- 내부에는 **ALU(산술논리연산장치)**, **제어장치(CU)**, **여러 레지스터**가 존재

### 메모리 (주기억장치, RAM)
- 현재 실행 중인 프로그램의 명령어와 데이터를 저장
- 주소(address)라는 개념을 사용해 저장된 값에 빠르게 접근할 수 있음
- 전원이 꺼지면 내용이 사라지는 휘발성 저장장치

### 보조기억장치
- 전원이 꺼져도 데이터를 보관할 수 있는 비휘발성 저장장치
- 예: 하드디스크, SSD, USB, DVD 등
- 주로 프로그램이나 데이터를 장기 보관하는 용도

### 입출력장치
- 컴퓨터 외부와 정보를 교환하는 장치
- 예: 모니터, 키보드, 마우스, 프린터 등
- 보조기억장치도 넓은 의미에서는 입출력장치로 분류할 수 있지만, 일반적으로 구분해서 설명.

이 네 가지 부품은 메인보드(마더보드)에 연결되어 있고, 시스템 버스(주소 버스, 데이터 버스, 제어 버스)를 통해 서로 정보를 주고받음.

---

## CPU의 내부 구성 요소

### 산술논리연산장치(ALU; Arithmetic Logic Unit)

![](https://velog.velcdn.com/images/ekdeon/post/320dff68-457d-454f-8dfd-577f03142b45/image.png)

레지스터에서 피연산자를, 제어장치에서 수행할 연산을 알려주는 제어 신호를 받아들인 뒤 산술(덧셈, 뺄셈 등)이나 논리(AND, OR 등) 연산 수행

#### **ALU가 내보내는 정보**
1. 연산 결과(숫자, 문자, 주소 등)는 레지스터에 임시 저장
2. **플래그(Flag)**: 연산 결과에 대한 추가 상태 정보(부호, 0 여부, 오버플로우, 캐리 등)

#### **주요 플래그 종류**
| 플래그 종류      | 의미 및 예시                                         |
|------------------|-----------------------------------------------------|
| 부호 플래그      | 연산 결과가 음수(1)인지 양수(0)인지 표시                  |
| 제로 플래그      | 결과가 0(1)인지 아닌지(0) 표시                      |
| 캐리 플래그      | 올림/빌림 발생 여부(1: 발생, 0: 미발생)             |
| 오버플로우 플래그| 오버플로우 발생 여부(1: 발생, 0: 미발생)            |
| 인터럽트 플래그  | 인터럽트 허용 여부(1: 허용, 0: 불허)                |
| 슈퍼바이저 플래그| 커널/사용자 모드 구분(1: 커널, 0: 사용자)           |

플래그 레지스터가 아래와 같은 구조를 가지고 있고, ALU가 연산을 수행한 후 부호 플래그가 1이 되었다면 연산 결과가 음수임을 알 수 있음.

![](https://velog.velcdn.com/images/ekdeon/post/ea43b566-d65b-439d-8a97-d8703f10b418/image.png)

---

### 제어장치(CU; Control Unit)

![](https://velog.velcdn.com/images/ekdeon/post/72a64214-8aa7-465a-8dfe-42f6f4c4bf50/image.png)

명령어를 해석하고, 각 부품에 제어 신호를 보내 전체 동작을 조율하는 지휘자 역할. 제조사마다 구현 방식과 명령어 해석 방식에 차이가 있음.

#### 제어장치가 받아들이는 정보 (입력)

**1. 클럭 신호**
- 클럭(Clock): 컴퓨터 시스템 내 모든 부품의 동작을 동기화하는 기준 시간 신호

- 클럭 신호의 주기적인 펄스에 따라 데이터 전송, ALU 연산, 명령어 인출 등의 작업을 수행

- 모든 부품이 한 클럭마다 작동하는 것은 아니며, 하나의 명령어가 여러 클럭에 걸쳐 실행될 수 있음

**2. 해석할 명령어**
- **명령어 레지스터**에 저장된 명령어를 받아들임
- 명령어를 해석한 후 제어 신호를 발생시켜 컴퓨터 부품들에 수행 내용을 전달

**3. 플래그 값**
- **플래그 레지스터** 속 플래그 값을 받아들임
- ALU 연산에 대한 추가적인 상태 정보
- 제어 신호 발생 시 중요한 참고 사항으로 활용

**4. 외부 제어 신호**
- **제어 버스**를 통해 CPU 외부 장치(입출력장치 등)로부터 전달된 제어 신호를 받아들임

<br>

#### 제어장치가 내보내는 정보 (출력)

**CPU 외부로 전달하는 제어 신호**
- **제어 버스**를 통해 전달
- **메모리 제어 신호**: 메모리에서 값을 읽거나 새로운 값을 쓸 때
- **입출력장치 제어 신호**: 입출력장치(보조기억장치 포함)의 값을 읽거나 쓸 때

**CPU 내부로 전달하는 제어 신호**
- **ALU 제어 신호**: 수행할 연산을 지시
- **레지스터 제어 신호**: 레지스터 간 데이터 이동 또는 저장된 명령어 해석을 위해 전달

---

### 레지스터(Register)
CPU 내부의 임시 저장장치. 연산에 필요한 값, 주소, 상태정보 등을 일시적으로 저장.

**4. 주요 레지스터 종류와 역할**

| 레지스터             | 역할                                                         |
|----------------------|-------------------------------------------------------------|
| 프로그램 카운터(PC)  | 다음에 읽을 명령어의 메모리 주소 저장.                |
| 명령어 레지스터(IR)  | 현재 해석할 명령어 저장.                                 |
| 메모리 주소 레지스터(MAR) | 메모리 접근 시 사용할 주소 저장.                       |
| 메모리 버퍼 레지스터(MBR/MDR) | 메모리와 주고받을 데이터 임시 저장.              |
| 플래그 레지스터      | ALU 연산 결과의 플래그 값 저장.                   |
| 범용 레지스터        | 연산, 주소, 데이터 등 여러 용도에 사용.               |
| 스택 포인터(SP)      | 스택의 최상단 위치(주소) 저장.                        |
| 베이스 레지스터      | 기준 주소 저장, 변위 주소 지정 방식 등에 사용.         |

---

## 명령어 사이클과 인터럽트 

### 명령어 사이클(Instruction Cycle)

![](https://velog.velcdn.com/images/ekdeon/post/d10bf602-fd68-4cb9-b69f-147cba6df572/image.png)

- CPU가 하나의 명령어를 처리하는 정형화된 흐름으로, 프로그램의 각 명령어는 이 사이클을 반복하며 실행됨
- 명령어 사이클은 일반적으로 다음 세 단계로 구성됨:

  1. **인출 사이클(Fetch Cycle)**  
     - 메모리에 저장된 명령어를 CPU로 가져오는 과정.
     - 프로그램 카운터(PC)가 가리키는 주소에서 명령어를 읽어와 명령어 레지스터(IR)에 저장함.

  2. **실행 사이클(Execution Cycle)**  
     - 인출한 명령어를 해석하고 실행하는 과정.
     - 제어장치가 명령어를 해석하여 필요한 제어 신호를 발생시키고, ALU가 연산을 수행하거나 데이터 이동 등 명령을 실행함.

  3. **간접 사이클(Indirect Cycle, 필요시)**  
     - 명령어가 직접 데이터를 지정하지 않고, 데이터의 주소를 간접적으로 지정할 때 추가로 메모리에 접근하는 과정.
     - 예를 들어, 명령어의 오퍼랜드가 실제 데이터가 아니라 데이터의 주소일 때, 해당 주소에서 데이터를 한 번 더 읽어오는 단계.

- 대부분의 명령어는 인출 사이클과 실행 사이클만 반복하지만, 간접 주소 지정이 필요한 경우 간접 사이클이 추가됨.

---

### 인터럽트(Interrupt)

![](https://velog.velcdn.com/images/ekdeon/post/a96c5c82-53c6-453e-a686-633d22e3e6cb/image.png)

- CPU가 명령어를 처리하는 정상적인 흐름을 방해하는 신호로, CPU가 꼭 주목해야 할 일이 생겼을 때 발생.
- 인터럽트의 종류:
  - **동기 인터럽트(예외, Exception):**  
    - CPU가 명령어를 실행하다가 예기치 못한 상황(예: 프로그래밍 오류, 0으로 나누기 등)이 발생했을 때 내부적으로 발생.
  - **비동기 인터럽트(하드웨어 인터럽트):**  
    - 입출력장치 등 CPU 외부에서 발생. 예를 들어, 프린터가 작업을 마쳤을 때 CPU에 알림을 보내는 경우.

- **하드웨어 인터럽트 처리 순서:**
  1. 입출력장치가 CPU에 인터럽트 요청 신호를 보냄.
  2. CPU는 실행 사이클이 끝나고 명령어를 인출하기 전, 인터럽트 여부를 항상 확인함.
  3. 인터럽트 플래그를 통해 현재 인터럽트를 받아들일 수 있는지 확인함.
  4. 인터럽트를 받아들일 수 있다면, CPU는 현재 작업 상태(프로그램 카운터 등)를 스택에 백업함.
  5. 인터럽트 벡터를 참조해 해당 인터럽트 서비스 루틴(ISR, Interrupt Service Routine)을 실행함.
  6. 인터럽트 서비스 루틴 실행이 끝나면, 백업해둔 작업 상태를 복구하고 원래 작업을 이어서 실행함.

- **주요 용어**
  - **인터럽트 요청 신호:** CPU의 작업 흐름을 중단시키는 요청.
  - **인터럽트 플래그:** 인터럽트 요청을 받아들일지 무시할지 결정하는 비트.
  - **인터럽트 벡터:** 인터럽트 서비스 루틴의 시작 주소 등 식별 정보.
  - **인터럽트 서비스 루틴(ISR):** 인터럽트가 발생했을 때 실행되는 프로그램.

